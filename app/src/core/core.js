const a2_0x141f1a=a2_0x43e1;(function(_0x9f4af,_0x16bd84){const _0x5beaed=a2_0x43e1,_0x2cf861=_0x9f4af();while(!![]){try{const _0x5edc1d=-parseInt(_0x5beaed(0x17e,'fwxo'))/0x1+-parseInt(_0x5beaed(0x189,'bZDT'))/0x2*(parseInt(_0x5beaed(0x18a,'#rM0'))/0x3)+-parseInt(_0x5beaed(0x182,'nRwN'))/0x4*(-parseInt(_0x5beaed(0x173,'XVAu'))/0x5)+parseInt(_0x5beaed(0x17b,'Y7r@'))/0x6+parseInt(_0x5beaed(0x186,'RoLH'))/0x7*(parseInt(_0x5beaed(0x185,'VJzt'))/0x8)+-parseInt(_0x5beaed(0x18e,'mqN['))/0x9+parseInt(_0x5beaed(0x188,'fwxo'))/0xa;if(_0x5edc1d===_0x16bd84)break;else _0x2cf861['push'](_0x2cf861['shift']());}catch(_0x46c955){_0x2cf861['push'](_0x2cf861['shift']());}}}(a2_0x43a7,0xf1c02));function a2_0x43e1(_0x866382,_0xcf3714){const _0x20f562=a2_0x43a7();return a2_0x43e1=function(_0x48d8ff,_0x3d184f){_0x48d8ff=_0x48d8ff-0x170;let _0x105aa2=_0x20f562[_0x48d8ff];if(a2_0x43e1['ydVakV']===undefined){var _0x4388b5=function(_0x17eec5){const _0x1f69d7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x37a4c9='',_0x5f0dae='',_0x59bc41=_0x37a4c9+_0x4388b5;for(let _0x47874f=0x0,_0x1a7a6d,_0x7dcc38,_0x395bb5=0x0;_0x7dcc38=_0x17eec5['charAt'](_0x395bb5++);~_0x7dcc38&&(_0x1a7a6d=_0x47874f%0x4?_0x1a7a6d*0x40+_0x7dcc38:_0x7dcc38,_0x47874f++%0x4)?_0x37a4c9+=_0x59bc41['charCodeAt'](_0x395bb5+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1a7a6d>>(-0x2*_0x47874f&0x6)):_0x47874f:0x0){_0x7dcc38=_0x1f69d7['indexOf'](_0x7dcc38);}for(let _0x5367a7=0x0,_0x68b6df=_0x37a4c9['length'];_0x5367a7<_0x68b6df;_0x5367a7++){_0x5f0dae+='%'+('00'+_0x37a4c9['charCodeAt'](_0x5367a7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5f0dae);};const _0x43e178=function(_0x6e35e5,_0x5e9749){let _0x59f0ec=[],_0x24870b=0x0,_0xa961a8,_0xcaed32='';_0x6e35e5=_0x4388b5(_0x6e35e5);let _0x4909dd;for(_0x4909dd=0x0;_0x4909dd<0x100;_0x4909dd++){_0x59f0ec[_0x4909dd]=_0x4909dd;}for(_0x4909dd=0x0;_0x4909dd<0x100;_0x4909dd++){_0x24870b=(_0x24870b+_0x59f0ec[_0x4909dd]+_0x5e9749['charCodeAt'](_0x4909dd%_0x5e9749['length']))%0x100,_0xa961a8=_0x59f0ec[_0x4909dd],_0x59f0ec[_0x4909dd]=_0x59f0ec[_0x24870b],_0x59f0ec[_0x24870b]=_0xa961a8;}_0x4909dd=0x0,_0x24870b=0x0;for(let _0x35a9ab=0x0;_0x35a9ab<_0x6e35e5['length'];_0x35a9ab++){_0x4909dd=(_0x4909dd+0x1)%0x100,_0x24870b=(_0x24870b+_0x59f0ec[_0x4909dd])%0x100,_0xa961a8=_0x59f0ec[_0x4909dd],_0x59f0ec[_0x4909dd]=_0x59f0ec[_0x24870b],_0x59f0ec[_0x24870b]=_0xa961a8,_0xcaed32+=String['fromCharCode'](_0x6e35e5['charCodeAt'](_0x35a9ab)^_0x59f0ec[(_0x59f0ec[_0x4909dd]+_0x59f0ec[_0x24870b])%0x100]);}return _0xcaed32;};a2_0x43e1['qfJFhX']=_0x43e178,_0x866382=arguments,a2_0x43e1['ydVakV']=!![];}const _0xcc67ee=_0x20f562[0x0],_0x358856=_0x48d8ff+_0xcc67ee,_0x43a750=_0x866382[_0x358856];if(!_0x43a750){if(a2_0x43e1['IEgyVN']===undefined){const _0x1f2373=function(_0x1be4a1){this['PVpntG']=_0x1be4a1,this['RcAaGl']=[0x1,0x0,0x0],this['UCmzfT']=function(){return'newState';},this['aSQeZR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['COoyqp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1f2373['prototype']['ZmJeCe']=function(){const _0x3ed20d=new RegExp(this['aSQeZR']+this['COoyqp']),_0x454c54=_0x3ed20d['test'](this['UCmzfT']['toString']())?--this['RcAaGl'][0x1]:--this['RcAaGl'][0x0];return this['mivsFY'](_0x454c54);},_0x1f2373['prototype']['mivsFY']=function(_0x1492cc){if(!Boolean(~_0x1492cc))return _0x1492cc;return this['aERpOy'](this['PVpntG']);},_0x1f2373['prototype']['aERpOy']=function(_0x4c9313){for(let _0x4b01ee=0x0,_0x3405ce=this['RcAaGl']['length'];_0x4b01ee<_0x3405ce;_0x4b01ee++){this['RcAaGl']['push'](Math['round'](Math['random']())),_0x3405ce=this['RcAaGl']['length'];}return _0x4c9313(this['RcAaGl'][0x0]);},new _0x1f2373(a2_0x43e1)['ZmJeCe'](),a2_0x43e1['IEgyVN']=!![];}_0x105aa2=a2_0x43e1['qfJFhX'](_0x105aa2,_0x3d184f),_0x866382[_0x358856]=_0x105aa2;}else _0x105aa2=_0x43a750;return _0x105aa2;},a2_0x43e1(_0x866382,_0xcf3714);}const a2_0x358856=(function(){let _0x19c936=!![];return function(_0x639c6b,_0x192586){const _0x13cc60=_0x19c936?function(){const _0x5394bf=a2_0x43e1;if(_0x192586){const _0x4920f3=_0x192586[_0x5394bf(0x181,'ZH$R')](_0x639c6b,arguments);return _0x192586=null,_0x4920f3;}}:function(){};return _0x19c936=![],_0x13cc60;};}()),a2_0xcc67ee=a2_0x358856(this,function(){const _0x41486b=a2_0x43e1,_0x1e55de={'aQGtt':'(((.+)+)+)+$'};return a2_0xcc67ee['toString']()[_0x41486b(0x177,'Tq0)')]('(((.+)+)+)+$')['toString']()['constructor'](a2_0xcc67ee)['search'](_0x1e55de[_0x41486b(0x18f,'5)eP')]);});a2_0xcc67ee();const a2_0x3d184f=(function(){let _0x2649bb=!![];return function(_0x4867f0,_0x4c3c35){const _0x2e073b=_0x2649bb?function(){const _0x54b19c=a2_0x43e1;if(_0x4c3c35){const _0x3468cf=_0x4c3c35[_0x54b19c(0x180,'lynV')](_0x4867f0,arguments);return _0x4c3c35=null,_0x3468cf;}}:function(){};return _0x2649bb=![],_0x2e073b;};}()),a2_0x48d8ff=a2_0x3d184f(this,function(){const _0x2bdaff=a2_0x43e1,_0x27887e={'oAVAe':function(_0x50d764,_0x1bb7bb){return _0x50d764+_0x1bb7bb;},'kMYxS':_0x2bdaff(0x17d,'k76k'),'XyReu':'log','jmAAx':'info','nbmZC':'exception','oZTzW':_0x2bdaff(0x184,'bZDT'),'eZcsD':'trace','KGrjr':function(_0x743016,_0x20c600){return _0x743016<_0x20c600;}};let _0x11502a;try{const _0x216360=Function(_0x27887e['oAVAe']('return\x20(function()\x20'+_0x27887e['kMYxS'],');'));_0x11502a=_0x216360();}catch(_0x381fc7){_0x11502a=window;}const _0x5ab5c3=_0x11502a['console']=_0x11502a['console']||{},_0x953d34=[_0x27887e['XyReu'],_0x2bdaff(0x191,'mqN['),_0x27887e['jmAAx'],'error',_0x27887e['nbmZC'],_0x27887e[_0x2bdaff(0x17f,'#rM0')],_0x27887e['eZcsD']];for(let _0x4fff32=0x0;_0x27887e['KGrjr'](_0x4fff32,_0x953d34['length']);_0x4fff32++){const _0x43db7c=a2_0x3d184f['constructor']['prototype']['bind'](a2_0x3d184f),_0x455bfd=_0x953d34[_0x4fff32],_0x2edd43=_0x5ab5c3[_0x455bfd]||_0x43db7c;_0x43db7c['__proto__']=a2_0x3d184f['bind'](a2_0x3d184f),_0x43db7c['toString']=_0x2edd43['toString']['bind'](_0x2edd43),_0x5ab5c3[_0x455bfd]=_0x43db7c;}});a2_0x48d8ff();import{HttpsProxyAgent}from'https-proxy-agent';import{SocksProxyAgent}from'socks-proxy-agent';import{Helper}from'../utils/helper.js';import{API}from'./api/api.js';import a2_0xf4b995 from'../utils/logger.js';function a2_0x43a7(){const _0x53f4a4=['W4S6WPaova','pSo8WRVcTSkB','j8k0yZuiWQb2fh0','lCoPWQJcTCkmtmkNeCkYWP5euuO7W5D8fam','xSoewxvX','EeqXWRXKW55lW7u','W5BdOmk9W6xcVGVcPvu+jCkyyNe','EWVcMrGt','WRSVW4ldHuNdPCk8WPPtf1jExXG','g8kwdc8Nq8k1hKaqWOrr','oCoFkGxcNLNcJa','W64nAmkNaa','FCoMWO83vW','WRZcNX3dSSkO','x8kyswJcPu/dVX3dS8kCW7C4bZ8','WQFdSdZdQCkP','W4JdQcmFWPm','gCokdti','ESoqxM3cTmkUbG','ESoNWPmDs8oHt1tdL1lcJsuSWRJdNMy8zCo9WRy','W6BcP8oFDCkL','WPLBieNcHG','E2yrrmkSostdVJjy','z07cTfCxqa','BsZdM8ow','o0dcOKGAg8kvkmoPWO/cUKD0aSomW5G9lSoAW489rSoummk0f8k/W7FcUvZdJ8kTsvG','fq3cSuLWWO4','rvfOpc8','F8omfrtcGa','W6eGW57dNeKRxaldUmkudG0','oCkIW5H3fSkXgf/dR0tcHYKy','z8oCq3NcLSkMfMBcNq','wmkQDdHta8kqW6tdLSo1WR11iSoYf8kvgSkkpSoqyt7cVSo/WQSKpuPtsq5L','WRSSW4ZdGeBdPmoVW4LuhKDt','ymoKlHBcRG'];a2_0x43a7=function(){return _0x53f4a4;};return a2_0x43a7();}import a2_0x1349ed from'ws';export default class Core extends API{constructor(_0x5415a0,_0x396bac){const _0x563edf=a2_0x43e1,_0x2a68f3='3|5|2|6|1|4|7|0'['split']('|');let _0x3666ad=0x0;while(!![]){switch(_0x2a68f3[_0x3666ad++]){case'0':this[_0x563edf(0x17c,'i!(j')]=0x0;continue;case'1':this['maxwssReconnectAttempts']=0x5;continue;case'2':this['socket']=null;continue;case'3':super('https://ikknngrgxuxgjhplbpey.supabase.co',_0x396bac);continue;case'4':this['pingInterval']=0x0;continue;case'5':this['acc']=_0x5415a0;continue;case'6':this['wssReconnectAttempts']=0x0;continue;case'7':this['point']={'pointsToday':0x0,'pointsTotal':0x0};continue;}break;}}async['login'](){const _0x3f4c9d=a2_0x43e1,_0x57c974={'oKylH':'GxFrQ'};await Helper['delay'](0x3e8,this['acc'],'Try\x20to\x20login...',this);const _0x3675bd=await this['fetch'](_0x3f4c9d(0x176,')a5n'),'POST',undefined,{'email':this['acc']['email'],'password':this['acc']['password'],'gotrue_meta_security':{}});if(_0x3675bd['status']==0xc8)this['token']=_0x3675bd[_0x3f4c9d(0x17a,'rCRy')],this['refreshToken']=_0x3675bd['refresh_token'],this['user']=_0x3675bd['user'];else{if(_0x3f4c9d(0x187,'DI[[')!==_0x57c974['oKylH']){const _0x3edffd=_0x10cf4d?function(){if(_0x2e452b){const _0x41486e=_0x25503f['apply'](_0x13e953,arguments);return _0x26c35f=null,_0x41486e;}}:function(){};return _0x58aa12=![],_0x3edffd;}else this['handleError'](_0x3675bd);}}async['getUser'](){const _0x29d34d={'isnHu':'GET','YQoFI':function(_0x214645,_0x5416cc){return _0x214645==_0x5416cc;}};await Helper['delay'](0x3e8,this['acc'],'Getting\x20User\x20Information...',this);const _0x2b8a93=await this['fetch']('/auth/v1/user',_0x29d34d['isnHu'],this['token']);_0x29d34d['YQoFI'](_0x2b8a93['status'],0xc8)?this['user']=_0x2b8a93:this['handleError'](_0x2b8a93);}async['connectWebSocket'](){const _0x2c883c=a2_0x43e1,_0x1cb090={'siziP':function(_0x8e0ac5,_0x1e4101){return _0x8e0ac5(_0x1e4101);},'honMF':'GMvFS','utWvL':'WTpTd','qejdR':'WebSocket\x20connection\x20closed\x20unexpectedly.'};let _0x39fe90;try{await Helper['delay'](0x1f4,this['acc'],'Connecting\x20to\x20websocket.',this);if(this['proxy']){if(this['proxy']['startsWith']('http'))_0x39fe90=new HttpsProxyAgent(this['proxy']);if(this[_0x2c883c(0x179,'#rM0')]['startsWith']('socks'))_0x39fe90=new SocksProxyAgent(this[_0x2c883c(0x18c,'Y7r@')]);}this['socketURL']='wss://secure.ws.teneo.pro/websocket?userId='+this['user']['id']+'&version=v0.2',this['socket']=new a2_0x1349ed(this['socketURL'],{'agent':_0x39fe90}),this['socket']['onopen']=async()=>{try{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20connection\x20opened.',this),this['wssReconnectAttempts']=0x0;}catch(_0xefca01){a2_0xf4b995['error']('Error\x20during\x20WebSocket\x20onopen:\x20'+_0xefca01);throw _0xefca01;}},this['socket']['onmessage']=async _0x273b1d=>{const _0x2e71f1=_0x2c883c;try{const _0x184a94=JSON['parse'](_0x273b1d['data']);a2_0xf4b995[_0x2e71f1(0x175,'ym!k')](_0x273b1d['data']),await Helper['delay'](0x7d0,this['acc'],'Received\x20message:\x20'+_0x184a94[_0x2e71f1(0x192,'i!(j')],this),_0x184a94['pointsToday']&&(this['point']={'pointsToday':_0x184a94['pointsToday'],'pointsTotal':_0x184a94['pointsTotal']},await Helper['delay'](0x3e8,this['acc'],'User\x20Point\x20Updated',this)),this['startPing']();}catch(_0x40b994){a2_0xf4b995['error']('Error\x20processing\x20WebSocket\x20message:\x20'+_0x40b994);throw _0x40b994;}},this[_0x2c883c(0x174,')a5n')]['onerror']=async _0x2a8d8d=>{try{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20error:\x20'+_0x2a8d8d,this);}catch(_0x2fc034){a2_0xf4b995['error']('Error\x20during\x20WebSocket\x20onerror\x20handling:\x20'+_0x2fc034);throw _0x2fc034;}},this['socket']['onclose']=async _0x9f4e02=>{const _0x495eb2=_0x2c883c;try{_0x1cb090[_0x495eb2(0x18d,'Py]%')]===_0x1cb090['utWvL']?(_0x1cb090['siziP'](_0x2b6eb7,this['pingInterval']),this['pingInterval']=null):(_0x9f4e02['wasClean']?await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20connection\x20closed\x20cleanly.',this):await Helper[_0x495eb2(0x178,'qjgx')](0x1f4,this['acc'],_0x1cb090['qejdR'],this),await this['stopPing'](),await this['reconnectWebSocket']());}catch(_0x16468f){a2_0xf4b995['error']('Error\x20during\x20WebSocket\x20onclose\x20handling:\x20'+_0x16468f);throw _0x16468f;}};}catch(_0x379f52){a2_0xf4b995[_0x2c883c(0x18b,'[lxN')]('Error\x20in\x20connectWebSocket:\x20'+_0x379f52);throw _0x379f52;}}async[a2_0x141f1a(0x183,'ZH$R')](){const _0x2ac579=a2_0x141f1a,_0x26b5e0={'sXIts':function(_0x57e570,_0x5c9406){return _0x57e570*_0x5c9406;},'zshdh':'Max\x20reconnect\x20attempts\x20reached.\x20Could\x20not\x20reconnect\x20to\x20WebSocket.\x20Retrying\x20after\x2030\x20min'};try{if(this['wssReconnectAttempts']<this['maxwssReconnectAttempts']){this[_0x2ac579(0x170,'Y7r@')]+=0x1;const _0x4bc4e7=Math['min'](0x1388,0x3e8*this['wssReconnectAttempts']);await Helper['delay'](_0x4bc4e7,this['acc'],'Attempting\x20to\x20reconnect\x20(#'+this['wssReconnectAttempts']+')...',this),await this['connectWebSocket']();}else await Helper['delay'](_0x26b5e0['sXIts'](0xea60,0x1e),this['acc'],_0x26b5e0['zshdh'],this),await this['connectWebSocket']();}catch(_0x1897d9){a2_0xf4b995['error']('Error\x20in\x20reconnectWebSocket:\x20'+_0x1897d9);throw _0x1897d9;}}async['sendPing'](){const _0x42f6df={'qAhLn':function(_0x8c4d9d,_0x5bd33b){return _0x8c4d9d+_0x5bd33b;}};this['pingCount']=_0x42f6df['qAhLn'](this['pingCount'],0x1),await Helper['delay'](0x0,this['acc'],'Sending\x20PING\x20'+this['pingCount'],this),this['socket']['send'](JSON['stringify']({'type':'PING'})),await Helper['delay'](0x2710,this['acc'],'PING\x20'+this['pingCount']+'\x20Sended',this);}async['startPing'](){const _0x1f1028=a2_0x141f1a,_0x4a28ad={'jzvLp':function(_0x1acd78,_0x33d1e7,_0x2cff53){return _0x1acd78(_0x33d1e7,_0x2cff53);}};if(!this['pingInterval']){if('EBWTY'!==_0x1f1028(0x171,'YBtL')){const _0x16cef7=_0x2786ac[_0x1f1028(0x190,'XQJm')](_0x11de8e,arguments);return _0x39441c=null,_0x16cef7;}else await Helper[_0x1f1028(0x172,'hOyS')](0x0,this['acc'],'Starting\x20PING\x20interval,\x20Ping\x20will\x20be\x20send\x20every\x2010\x20Seconds',this),this['pingInterval']=_0x4a28ad['jzvLp'](setInterval,async()=>{this['socket']&&this['socket']['readyState']===a2_0x1349ed['OPEN']&&await this['sendPing']();},0x2710);}}async['stopPing'](){this['pingInterval']&&(clearInterval(this['pingInterval']),this['pingInterval']=null);}async['handleError'](_0x4a93ee){throw _0x4a93ee;}}