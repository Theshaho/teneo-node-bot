(function(_0x6175ed,_0x3b67fc){const _0x25e24d=a2_0x5b4c,_0x4f7ce3=_0x6175ed();while(!![]){try{const _0x184ad2=parseInt(_0x25e24d(0x1c7,'ix7S'))/0x1+-parseInt(_0x25e24d(0x1bb,'DI5f'))/0x2+parseInt(_0x25e24d(0x1c0,'DI5f'))/0x3+parseInt(_0x25e24d(0x1cb,'u6zQ'))/0x4*(-parseInt(_0x25e24d(0x1b5,'g4ft'))/0x5)+parseInt(_0x25e24d(0x1cd,'Kvpn'))/0x6*(parseInt(_0x25e24d(0x1c4,'1HKQ'))/0x7)+parseInt(_0x25e24d(0x1b9,'LNln'))/0x8*(-parseInt(_0x25e24d(0x1ca,'LNln'))/0x9)+parseInt(_0x25e24d(0x1b7,'f3vs'))/0xa;if(_0x184ad2===_0x3b67fc)break;else _0x4f7ce3['push'](_0x4f7ce3['shift']());}catch(_0x5ab0bc){_0x4f7ce3['push'](_0x4f7ce3['shift']());}}}(a2_0x2581,0x31a38));const a2_0x5ecb31=(function(){let _0x4d425f=!![];return function(_0x4af9f6,_0x38af51){const _0x3bd1ca=_0x4d425f?function(){if(_0x38af51){const _0x2ff8f2=_0x38af51['apply'](_0x4af9f6,arguments);return _0x38af51=null,_0x2ff8f2;}}:function(){};return _0x4d425f=![],_0x3bd1ca;};}()),a2_0x2d9f55=a2_0x5ecb31(this,function(){const _0x555dea={'GQhUh':'(((.+)+)+)+$'};return a2_0x2d9f55['toString']()['search'](_0x555dea['GQhUh'])['toString']()['constructor'](a2_0x2d9f55)['search'](_0x555dea['GQhUh']);});a2_0x2d9f55();const a2_0x547d4d=(function(){let _0x256371=!![];return function(_0x1baaef,_0x1416a7){const _0x44a70a=_0x256371?function(){if(_0x1416a7){const _0x187b9c=_0x1416a7['apply'](_0x1baaef,arguments);return _0x1416a7=null,_0x187b9c;}}:function(){};return _0x256371=![],_0x44a70a;};}()),a2_0x3fc692=a2_0x547d4d(this,function(){const _0x262bf4=a2_0x5b4c,_0x56af4e={'FNHjX':function(_0x5e63a9,_0x56b9d0){return _0x5e63a9+_0x56b9d0;},'lwUCz':function(_0x1c3087,_0x42d52){return _0x1c3087+_0x42d52;},'VqbBh':'return\x20(function()\x20','eayGS':'{}.constructor(\x22return\x20this\x22)(\x20)','qLOjO':function(_0x13df3a){return _0x13df3a();},'ffjTS':'warn','BWAAl':'table','dMaas':'trace','CvLPo':function(_0x235a6f,_0xbe095){return _0x235a6f<_0xbe095;}},_0x1695f0=function(){let _0x567c87;try{_0x567c87=Function(_0x56af4e['FNHjX'](_0x56af4e['lwUCz'](_0x56af4e['VqbBh'],_0x56af4e['eayGS']),');'))();}catch(_0x150366){_0x567c87=window;}return _0x567c87;},_0x46292d=_0x56af4e[_0x262bf4(0x1be,'zDeM')](_0x1695f0),_0x26fe48=_0x46292d['console']=_0x46292d['console']||{},_0x4dfaa3=['log',_0x56af4e[_0x262bf4(0x1c8,'h(pA')],'info','error','exception',_0x56af4e['BWAAl'],_0x56af4e['dMaas']];for(let _0x7fa134=0x0;_0x56af4e['CvLPo'](_0x7fa134,_0x4dfaa3['length']);_0x7fa134++){const _0x479447=a2_0x547d4d['constructor']['prototype']['bind'](a2_0x547d4d),_0xebd36b=_0x4dfaa3[_0x7fa134],_0x5dcb05=_0x26fe48[_0xebd36b]||_0x479447;_0x479447['__proto__']=a2_0x547d4d['bind'](a2_0x547d4d),_0x479447['toString']=_0x5dcb05['toString']['bind'](_0x5dcb05),_0x26fe48[_0xebd36b]=_0x479447;}});a2_0x3fc692();import{HttpsProxyAgent}from'https-proxy-agent';import{SocksProxyAgent}from'socks-proxy-agent';import{Helper}from'../utils/helper.js';function a2_0x2581(){const _0x4141ca=['BhBcLq','e8keWRq3xmkZDSow','mfytWOTRuvXdWQG1','W53dJ33dL8o4','WRDaWPRdHqS','FKtcJenHyCocja','W4RdUg3dSmoZ','bmk3WQK+FYX4u8oyW48OcLS','pSoEW70pnCkXjCoE','WO0Lu8kqtCoiEHiw','WOlcMvJdJ8kOW4y8fG','WQO5itdcU8kfbGyyDYrk','W5OBWPZdKGW5W6xcPSk2D8k8d31oWRbCW55BW63dK8oIbwpdI8omhmoa','eCokztxdQCk9oSkndbCKomk+W6vJAcZdM1mIW6O1W5ddRCkxgmotdCo6','z8kxWR8xWRq','Bmo5AcBcPSoxWRtdNCkIWQhdIYddQ8k7agpcS8o2','WQ02jdpcVSkicrO9xc9F','krtcQM1A','WRb1e8kwW63dMGT/WPdcTHddP8kGWRpcICoDbf0','FCkvtqtcVa','xsWCWQ8WWPBcSCk0dhq/W5C','WOLxWO3cN8o0','WOVcP8on','cSk9ogxcTSk1WRxdOmkGWPJcHJS','WP/cPmoBWPhdLG','ACoWrH3dKq','WOKNwCojk8oswc8HWQu+','xSoMfCkdktj3WP4oWR9w'];a2_0x2581=function(){return _0x4141ca;};return a2_0x2581();}import{API}from'./api/api.js';function a2_0x5b4c(_0x24bbb1,_0x30a12d){const _0x17797e=a2_0x2581();return a2_0x5b4c=function(_0x3fc692,_0x547d4d){_0x3fc692=_0x3fc692-0x1b4;let _0x37f67a=_0x17797e[_0x3fc692];if(a2_0x5b4c['HPyeYr']===undefined){var _0x32ee1f=function(_0x1c5102){const _0x170f57='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3a381e='',_0x1a4a25='',_0x3a2158=_0x3a381e+_0x32ee1f;for(let _0x4c29fb=0x0,_0x3921ca,_0x428558,_0x41fde9=0x0;_0x428558=_0x1c5102['charAt'](_0x41fde9++);~_0x428558&&(_0x3921ca=_0x4c29fb%0x4?_0x3921ca*0x40+_0x428558:_0x428558,_0x4c29fb++%0x4)?_0x3a381e+=_0x3a2158['charCodeAt'](_0x41fde9+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3921ca>>(-0x2*_0x4c29fb&0x6)):_0x4c29fb:0x0){_0x428558=_0x170f57['indexOf'](_0x428558);}for(let _0x12a5f2=0x0,_0x67af23=_0x3a381e['length'];_0x12a5f2<_0x67af23;_0x12a5f2++){_0x1a4a25+='%'+('00'+_0x3a381e['charCodeAt'](_0x12a5f2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1a4a25);};const _0x5b4c8d=function(_0x27abc7,_0x335682){let _0x27a168=[],_0x9eba7e=0x0,_0x5e836a,_0x10c6c0='';_0x27abc7=_0x32ee1f(_0x27abc7);let _0x40857c;for(_0x40857c=0x0;_0x40857c<0x100;_0x40857c++){_0x27a168[_0x40857c]=_0x40857c;}for(_0x40857c=0x0;_0x40857c<0x100;_0x40857c++){_0x9eba7e=(_0x9eba7e+_0x27a168[_0x40857c]+_0x335682['charCodeAt'](_0x40857c%_0x335682['length']))%0x100,_0x5e836a=_0x27a168[_0x40857c],_0x27a168[_0x40857c]=_0x27a168[_0x9eba7e],_0x27a168[_0x9eba7e]=_0x5e836a;}_0x40857c=0x0,_0x9eba7e=0x0;for(let _0xa50aba=0x0;_0xa50aba<_0x27abc7['length'];_0xa50aba++){_0x40857c=(_0x40857c+0x1)%0x100,_0x9eba7e=(_0x9eba7e+_0x27a168[_0x40857c])%0x100,_0x5e836a=_0x27a168[_0x40857c],_0x27a168[_0x40857c]=_0x27a168[_0x9eba7e],_0x27a168[_0x9eba7e]=_0x5e836a,_0x10c6c0+=String['fromCharCode'](_0x27abc7['charCodeAt'](_0xa50aba)^_0x27a168[(_0x27a168[_0x40857c]+_0x27a168[_0x9eba7e])%0x100]);}return _0x10c6c0;};a2_0x5b4c['lJqaGk']=_0x5b4c8d,_0x24bbb1=arguments,a2_0x5b4c['HPyeYr']=!![];}const _0x2d9f55=_0x17797e[0x0],_0x5ecb31=_0x3fc692+_0x2d9f55,_0x2581fc=_0x24bbb1[_0x5ecb31];if(!_0x2581fc){if(a2_0x5b4c['MBmZJi']===undefined){const _0x4e563e=function(_0x5b3255){this['dXdNZe']=_0x5b3255,this['czeefd']=[0x1,0x0,0x0],this['WzwBsh']=function(){return'newState';},this['tTQDrK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JOeoCo']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4e563e['prototype']['vTqRYO']=function(){const _0x116540=new RegExp(this['tTQDrK']+this['JOeoCo']),_0x3f50d4=_0x116540['test'](this['WzwBsh']['toString']())?--this['czeefd'][0x1]:--this['czeefd'][0x0];return this['UprVlb'](_0x3f50d4);},_0x4e563e['prototype']['UprVlb']=function(_0xe76496){if(!Boolean(~_0xe76496))return _0xe76496;return this['rdFjOY'](this['dXdNZe']);},_0x4e563e['prototype']['rdFjOY']=function(_0x5aeb6f){for(let _0x1b9f7a=0x0,_0x9c3305=this['czeefd']['length'];_0x1b9f7a<_0x9c3305;_0x1b9f7a++){this['czeefd']['push'](Math['round'](Math['random']())),_0x9c3305=this['czeefd']['length'];}return _0x5aeb6f(this['czeefd'][0x0]);},new _0x4e563e(a2_0x5b4c)['vTqRYO'](),a2_0x5b4c['MBmZJi']=!![];}_0x37f67a=a2_0x5b4c['lJqaGk'](_0x37f67a,_0x547d4d),_0x24bbb1[_0x5ecb31]=_0x37f67a;}else _0x37f67a=_0x2581fc;return _0x37f67a;},a2_0x5b4c(_0x24bbb1,_0x30a12d);}import a2_0x29b680 from'../utils/logger.js';import a2_0x43349a from'ws';export default class Core extends API{constructor(_0x10d4ac,_0x2da9ba){super('https://ikknngrgxuxgjhplbpey.supabase.co',_0x2da9ba),this['acc']=_0x10d4ac,this['socket']=null,this['wssReconnectAttempts']=0x0,this['maxwssReconnectAttempts']=0x5,this['pingInterval']=0x0,this['point']={'pointsToday':0x0,'pointsTotal':0x0},this['pingCount']=0x0;}async['login'](){const _0x485702=a2_0x5b4c,_0x360781={'mXMYO':'POST'};await Helper['delay'](0x3e8,this['acc'],'Try\x20to\x20login...',this);const _0x4be498=await this['fetch']('/auth/v1/token?grant_type=password',_0x360781[_0x485702(0x1c3,'cVO%')],undefined,{'email':this['acc']['email'],'password':this['acc'][_0x485702(0x1ba,'2P7a')],'gotrue_meta_security':{}});_0x4be498['status']==0xc8?(this['token']=_0x4be498['access_token'],this['refreshToken']=_0x4be498['refresh_token'],this['user']=_0x4be498['user']):this['handleError'](_0x4be498);}async['getUser'](){const _0x3a7146={'bKrCV':'GET'};await Helper['delay'](0x3e8,this['acc'],'Getting\x20User\x20Information...',this);const _0x2b75f2=await this['fetch']('/auth/v1/user',_0x3a7146['bKrCV'],this['token']);_0x2b75f2['status']==0xc8?this['user']=_0x2b75f2:this['handleError'](_0x2b75f2);}async['connectWebSocket'](){const _0x5c696e=a2_0x5b4c,_0x173ae9={'wgJYV':function(_0x5c658f,_0x2c65e9){return _0x5c658f===_0x2c65e9;},'ptffX':_0x5c696e(0x1c5,'8Es2'),'rEbHy':'WebSocket\x20connection\x20closed\x20cleanly.'};let _0x37147f;try{if(this['proxy']){if(this['proxy']['startsWith']('http'))_0x37147f=new HttpsProxyAgent(this['proxy']);if(this['proxy'][_0x5c696e(0x1ce,'tn^W')]('socks'))_0x37147f=new SocksProxyAgent(this['proxy']);}this['socketURL']='wss://secure.ws.teneo.pro/websocket?userId='+this['user']['id']+'&version=v0.2',this['socket']=new a2_0x43349a(this['socketURL'],{'agent':_0x37147f}),this['socket']['onopen']=async()=>{try{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20connection\x20opened.',this),this['wssReconnectAttempts']=0x0;}catch(_0x45b802){a2_0x29b680['error']('Error\x20during\x20WebSocket\x20onopen:\x20'+_0x45b802);throw _0x45b802;}},this['socket']['onmessage']=async _0x2ff91b=>{const _0x447760=_0x5c696e;try{const _0x397dc0=JSON['parse'](_0x2ff91b['data']);a2_0x29b680['info'](_0x2ff91b['data']),await Helper['delay'](0x7d0,this['acc'],_0x447760(0x1c2,'A$3)')+_0x397dc0['message'],this),_0x397dc0['pointsToday']&&(this['point']={'pointsToday':_0x397dc0['pointsToday'],'pointsTotal':_0x397dc0['pointsTotal']},await Helper['delay'](0x3e8,this[_0x447760(0x1c6,'y$qE')],_0x447760(0x1bf,'ix7S'),this)),this['startPing']();}catch(_0x4e32db){a2_0x29b680['error']('Error\x20processing\x20WebSocket\x20message:\x20'+_0x4e32db);throw _0x4e32db;}},this['socket']['onerror']=async _0xf9762=>{const _0xea2bb9=_0x5c696e;try{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20error:\x20'+_0xf9762,this);}catch(_0x4177f2){a2_0x29b680[_0xea2bb9(0x1b6,'xH15')]('Error\x20during\x20WebSocket\x20onerror\x20handling:\x20'+_0x4177f2);throw _0x4177f2;}},this['socket']['onclose']=async _0x937235=>{const _0x32db81=_0x5c696e;try{_0x173ae9['wgJYV'](_0x173ae9['ptffX'],_0x32db81(0x1c9,'ix7S'))?(_0x937235['wasClean']?await Helper['delay'](0x1f4,this['acc'],_0x173ae9[_0x32db81(0x1cf,'xH15')],this):await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20connection\x20closed\x20unexpectedly.',this),await this['stopPing'](),await this['reconnectWebSocket']()):(this['token']=_0x385103['access_token'],this['refreshToken']=_0x38363b['refresh_token'],this['user']=_0x46bc1a['user']);}catch(_0x1445a5){a2_0x29b680['error']('Error\x20during\x20WebSocket\x20onclose\x20handling:\x20'+_0x1445a5);throw _0x1445a5;}};}catch(_0x51b2ec){a2_0x29b680['error'](_0x5c696e(0x1bc,'b9H(')+_0x51b2ec);throw _0x51b2ec;}}async['reconnectWebSocket'](){const _0x107042=a2_0x5b4c,_0xfa9d59={'hydlk':function(_0x574413,_0x2deae5){return _0x574413*_0x2deae5;}};try{if(this['wssReconnectAttempts']<this['maxwssReconnectAttempts']){this['wssReconnectAttempts']+=0x1;const _0x23742c=Math['min'](0x1388,_0xfa9d59['hydlk'](0x3e8,this['wssReconnectAttempts']));await Helper['delay'](_0x23742c,this[_0x107042(0x1cc,'**cs')],'Attempting\x20to\x20reconnect\x20(#'+this['wssReconnectAttempts']+')...',this),await this['connectWebSocket']();}else await Helper['delay'](0x3e8,this['acc'],'Max\x20reconnect\x20attempts\x20reached.\x20Could\x20not\x20reconnect\x20to\x20WebSocket.',this);}catch(_0x6a974b){a2_0x29b680['error'](_0x107042(0x1bd,'56m2')+_0x6a974b);throw _0x6a974b;}}async['sendPing'](){const _0x2c0218=a2_0x5b4c,_0x34109c={'HmPvf':'PING'};this['pingCount']=this['pingCount']+0x1,await Helper['delay'](0x0,this['acc'],'Sending\x20PING\x20'+this['pingCount'],this),this['socket']['send'](JSON['stringify']({'type':_0x34109c[_0x2c0218(0x1b4,'qz4z')]})),await Helper[_0x2c0218(0x1c1,'g4ft')](0x2710,this['acc'],'PING\x20'+this['pingCount']+'\x20Sended',this);}async['startPing'](){const _0x4e82a9={'jemjj':function(_0x43243c,_0x1a9b9e){return _0x43243c===_0x1a9b9e;},'STGzH':function(_0x2afda4,_0x1912ed,_0x1c6d38){return _0x2afda4(_0x1912ed,_0x1c6d38);}};!this['pingInterval']&&(await Helper['delay'](0x0,this['acc'],'Starting\x20PING\x20interval,\x20Ping\x20will\x20be\x20send\x20every\x2010\x20Seconds',this),this['pingInterval']=_0x4e82a9['STGzH'](setInterval,async()=>{this['socket']&&_0x4e82a9['jemjj'](this['socket']['readyState'],a2_0x43349a['OPEN'])&&await this['sendPing']();},0x2710));}async['stopPing'](){this['pingInterval']&&(clearInterval(this['pingInterval']),this['pingInterval']=null);}async['handleError'](_0x2d8e6a){throw _0x2d8e6a;}}