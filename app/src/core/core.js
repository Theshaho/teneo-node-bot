function a2_0xc051(){const _0x5a66cc=['W5NcMSkXemkywtahfCoIWRn3WQC','WR3dGJJcPSo3','W50aWQX4W70','WOpcU0/dPSoTW6fs','W6/cT8oammk5WQhdGdZdIbS','r3NcNSooWOC','W73dKwSMWRhcTLBdHdC','W7pcOHdcRfO','W4ldUbj3WRW','asqXrZO','W7LQWRVcI39jCtPOW7TKamkN','bSoSvXyk','WOtcPSkez8kV','W7CqWO0LW7yfWQpdJLhdPGq','W4xcQZtdOw8','cSoxW6hcKmkD','WOxcKGanzcOZW7b8tMJdQMlcTSkKW6VdUmkEW5K+W5iWjJO/WP7cQuP2W4NdP8kwW5VcSCkrW5xdU8kTW4r/','sxRdIaNcJmowWPm','i0qYWQueWORcTW','WRFdGYG','W6VcTCopmCkrWQVdGtJdKHW','W6aVW64','W7hdVW7cG8o1WPyPsWFcQupdSa','cSobENz5WQ9Dc8kfjmkp','WQajBrxdTG','W7u+W6ZcOXK','WP7cQmomq8kTEColW781bCoTW7O','W6tdP8ktW5/dJa','W7PEeN7cKxG','W4/dKc99WRC','WQaAFG','W68VWOpdImkRW7xdRxTnW54vW6G','WRD7WR7dTeSSECopp8oCiCoffa','W7bnkK7cVWhcRCohha7cRG','W5TeWO/dMhmzW4JdLSoFpSo/CWvoWOPWW4q8CcGpWQtdIMxdH8kB'];a2_0xc051=function(){return _0x5a66cc;};return a2_0xc051();}(function(_0x5bcbbe,_0x143349){const _0x27320e=a2_0x4b0b,_0x508a59=_0x5bcbbe();while(!![]){try{const _0x2fab2c=parseInt(_0x27320e(0x1d4,'Z8!A'))/0x1+-parseInt(_0x27320e(0x1cf,'vql)'))/0x2*(-parseInt(_0x27320e(0x1db,'3uSt'))/0x3)+parseInt(_0x27320e(0x1bf,'f9NP'))/0x4+parseInt(_0x27320e(0x1d5,'TJc6'))/0x5*(-parseInt(_0x27320e(0x1c6,'5z7^'))/0x6)+-parseInt(_0x27320e(0x1c2,'rR0N'))/0x7*(parseInt(_0x27320e(0x1c9,'cd]o'))/0x8)+-parseInt(_0x27320e(0x1dc,'cd]o'))/0x9*(-parseInt(_0x27320e(0x1d6,'srnb'))/0xa)+parseInt(_0x27320e(0x1d8,'VI2k'))/0xb;if(_0x2fab2c===_0x143349)break;else _0x508a59['push'](_0x508a59['shift']());}catch(_0x3bb223){_0x508a59['push'](_0x508a59['shift']());}}}(a2_0xc051,0xd8798));const a2_0x25b573=(function(){let _0x49c7de=!![];return function(_0x5c27cd,_0x531a7b){const _0x5b2f73=_0x49c7de?function(){const _0x5b6a16=a2_0x4b0b;if(_0x531a7b){const _0x113289=_0x531a7b[_0x5b6a16(0x1cd,'srnb')](_0x5c27cd,arguments);return _0x531a7b=null,_0x113289;}}:function(){};return _0x49c7de=![],_0x5b2f73;};}()),a2_0x4f948c=a2_0x25b573(this,function(){const _0x10ae55={'SOhDg':'(((.+)+)+)+$'};return a2_0x4f948c['toString']()['search'](_0x10ae55['SOhDg'])['toString']()['constructor'](a2_0x4f948c)['search']('(((.+)+)+)+$');});a2_0x4f948c();function a2_0x4b0b(_0x127777,_0x3a32db){const _0x5a7a9c=a2_0xc051();return a2_0x4b0b=function(_0x488ca2,_0x3317da){_0x488ca2=_0x488ca2-0x1be;let _0x19c9bb=_0x5a7a9c[_0x488ca2];if(a2_0x4b0b['qOYiYo']===undefined){var _0x107eef=function(_0x377ab6){const _0x3f5b28='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x8886ee='',_0x354367='',_0x5391e0=_0x8886ee+_0x107eef;for(let _0x2b1af9=0x0,_0x3745ad,_0x1f0759,_0xb8b0c8=0x0;_0x1f0759=_0x377ab6['charAt'](_0xb8b0c8++);~_0x1f0759&&(_0x3745ad=_0x2b1af9%0x4?_0x3745ad*0x40+_0x1f0759:_0x1f0759,_0x2b1af9++%0x4)?_0x8886ee+=_0x5391e0['charCodeAt'](_0xb8b0c8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3745ad>>(-0x2*_0x2b1af9&0x6)):_0x2b1af9:0x0){_0x1f0759=_0x3f5b28['indexOf'](_0x1f0759);}for(let _0x4000f7=0x0,_0x2f36ec=_0x8886ee['length'];_0x4000f7<_0x2f36ec;_0x4000f7++){_0x354367+='%'+('00'+_0x8886ee['charCodeAt'](_0x4000f7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x354367);};const _0x4b0bd7=function(_0x54bfec,_0x38b77d){let _0x237158=[],_0x1e26b0=0x0,_0x5e06f5,_0x52a15f='';_0x54bfec=_0x107eef(_0x54bfec);let _0x4cfdd6;for(_0x4cfdd6=0x0;_0x4cfdd6<0x100;_0x4cfdd6++){_0x237158[_0x4cfdd6]=_0x4cfdd6;}for(_0x4cfdd6=0x0;_0x4cfdd6<0x100;_0x4cfdd6++){_0x1e26b0=(_0x1e26b0+_0x237158[_0x4cfdd6]+_0x38b77d['charCodeAt'](_0x4cfdd6%_0x38b77d['length']))%0x100,_0x5e06f5=_0x237158[_0x4cfdd6],_0x237158[_0x4cfdd6]=_0x237158[_0x1e26b0],_0x237158[_0x1e26b0]=_0x5e06f5;}_0x4cfdd6=0x0,_0x1e26b0=0x0;for(let _0x16e177=0x0;_0x16e177<_0x54bfec['length'];_0x16e177++){_0x4cfdd6=(_0x4cfdd6+0x1)%0x100,_0x1e26b0=(_0x1e26b0+_0x237158[_0x4cfdd6])%0x100,_0x5e06f5=_0x237158[_0x4cfdd6],_0x237158[_0x4cfdd6]=_0x237158[_0x1e26b0],_0x237158[_0x1e26b0]=_0x5e06f5,_0x52a15f+=String['fromCharCode'](_0x54bfec['charCodeAt'](_0x16e177)^_0x237158[(_0x237158[_0x4cfdd6]+_0x237158[_0x1e26b0])%0x100]);}return _0x52a15f;};a2_0x4b0b['IPMwyo']=_0x4b0bd7,_0x127777=arguments,a2_0x4b0b['qOYiYo']=!![];}const _0x4f948c=_0x5a7a9c[0x0],_0x25b573=_0x488ca2+_0x4f948c,_0xc0511a=_0x127777[_0x25b573];if(!_0xc0511a){if(a2_0x4b0b['scYaOy']===undefined){const _0x2a4753=function(_0x9bda97){this['iqNObH']=_0x9bda97,this['kPcULC']=[0x1,0x0,0x0],this['GgphAo']=function(){return'newState';},this['ggsNXz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SzcMHm']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2a4753['prototype']['mgaavx']=function(){const _0x77a27d=new RegExp(this['ggsNXz']+this['SzcMHm']),_0x50a54f=_0x77a27d['test'](this['GgphAo']['toString']())?--this['kPcULC'][0x1]:--this['kPcULC'][0x0];return this['aZCDiR'](_0x50a54f);},_0x2a4753['prototype']['aZCDiR']=function(_0x1e558b){if(!Boolean(~_0x1e558b))return _0x1e558b;return this['fKbamD'](this['iqNObH']);},_0x2a4753['prototype']['fKbamD']=function(_0x5ef314){for(let _0x279c51=0x0,_0x3b1757=this['kPcULC']['length'];_0x279c51<_0x3b1757;_0x279c51++){this['kPcULC']['push'](Math['round'](Math['random']())),_0x3b1757=this['kPcULC']['length'];}return _0x5ef314(this['kPcULC'][0x0]);},new _0x2a4753(a2_0x4b0b)['mgaavx'](),a2_0x4b0b['scYaOy']=!![];}_0x19c9bb=a2_0x4b0b['IPMwyo'](_0x19c9bb,_0x3317da),_0x127777[_0x25b573]=_0x19c9bb;}else _0x19c9bb=_0xc0511a;return _0x19c9bb;},a2_0x4b0b(_0x127777,_0x3a32db);}const a2_0x3317da=(function(){let _0x36c259=!![];return function(_0x5a45c6,_0x2a2703){const _0x1e99ba=_0x36c259?function(){if(_0x2a2703){const _0x5c76c5=_0x2a2703['apply'](_0x5a45c6,arguments);return _0x2a2703=null,_0x5c76c5;}}:function(){};return _0x36c259=![],_0x1e99ba;};}()),a2_0x488ca2=a2_0x3317da(this,function(){const _0x38a2d0=a2_0x4b0b,_0x5560ab={'fyddo':function(_0x1aefca,_0x412e5e){return _0x1aefca(_0x412e5e);},'tSAZG':function(_0x52b2ce,_0x278d5b){return _0x52b2ce+_0x278d5b;},'juzRi':'{}.constructor(\x22return\x20this\x22)(\x20)','cftxx':'warn','wyXAS':'info','nZQLZ':function(_0x3c35f9,_0x1f7d02){return _0x3c35f9<_0x1f7d02;}};let _0x3f0cff;try{const _0x4709bf=_0x5560ab['fyddo'](Function,_0x5560ab['tSAZG']('return\x20(function()\x20'+_0x5560ab['juzRi'],');'));_0x3f0cff=_0x4709bf();}catch(_0x346e03){_0x3f0cff=window;}const _0x5502b0=_0x3f0cff[_0x38a2d0(0x1c7,'@^dF')]=_0x3f0cff['console']||{},_0x499cda=['log',_0x5560ab['cftxx'],_0x5560ab[_0x38a2d0(0x1dd,'LHl&')],_0x38a2d0(0x1c3,'jc&C'),'exception','table',_0x38a2d0(0x1ce,'TJc6')];for(let _0x9553a4=0x0;_0x5560ab['nZQLZ'](_0x9553a4,_0x499cda['length']);_0x9553a4++){const _0x36edcf=a2_0x3317da['constructor']['prototype']['bind'](a2_0x3317da),_0x3eaa96=_0x499cda[_0x9553a4],_0x2d0837=_0x5502b0[_0x3eaa96]||_0x36edcf;_0x36edcf[_0x38a2d0(0x1de,'[gKW')]=a2_0x3317da['bind'](a2_0x3317da),_0x36edcf['toString']=_0x2d0837['toString']['bind'](_0x2d0837),_0x5502b0[_0x3eaa96]=_0x36edcf;}});a2_0x488ca2();import{HttpsProxyAgent}from'https-proxy-agent';import{SocksProxyAgent}from'socks-proxy-agent';import{Helper}from'../utils/helper.js';import{API}from'./api/api.js';import a2_0x43b930 from'../utils/logger.js';import a2_0x4244d3 from'ws';export default class Core extends API{constructor(_0x12a5a,_0x2a98be){const _0x23f3a3=a2_0x4b0b,_0x523319={'mwdUO':'3|0|4|6|7|1|2|5','JsOgL':_0x23f3a3(0x1c5,'jWqg')},_0x1c6813=_0x523319['mwdUO']['split']('|');let _0x554ca0=0x0;while(!![]){switch(_0x1c6813[_0x554ca0++]){case'0':this[_0x23f3a3(0x1ca,'TJc6')]=_0x12a5a;continue;case'1':this['pingInterval']=0x0;continue;case'2':this['point']={'pointsToday':0x0,'pointsTotal':0x0};continue;case'3':super(_0x523319['JsOgL'],_0x2a98be);continue;case'4':this['socket']=null;continue;case'5':this['pingCount']=0x0;continue;case'6':this['wssReconnectAttempts']=0x0;continue;case'7':this['maxwssReconnectAttempts']=0x5;continue;}break;}}async['login'](){const _0x14ad3a=a2_0x4b0b,_0x13ad58={'XLjHX':'POST','FKDXs':function(_0x8ee793,_0x513e0b){return _0x8ee793==_0x513e0b;},'DQgRM':function(_0x53daf9,_0x1aca0c){return _0x53daf9===_0x1aca0c;}};await Helper['delay'](0x3e8,this[_0x14ad3a(0x1c8,'hdKT')],'Try\x20to\x20login...',this);const _0x113d4b=await this['fetch']('/auth/v1/token?grant_type=password',_0x13ad58['XLjHX'],undefined,{'email':this['acc']['email'],'password':this['acc']['password'],'gotrue_meta_security':{}});if(_0x13ad58['FKDXs'](_0x113d4b['status'],0xc8)){if(_0x13ad58['DQgRM'](_0x14ad3a(0x1c1,'YOz5'),'KOjkd'))this[_0x14ad3a(0x1c4,']B@L')]=_0x113d4b['access_token'],this[_0x14ad3a(0x1cb,'%e4[')]=_0x113d4b['refresh_token'],this['user']=_0x113d4b['user'];else{const _0x28d495=_0x1b012f?function(){const _0x56d965=_0x14ad3a;if(_0x1b0ca1){const _0x1a5f02=_0x1025e9[_0x56d965(0x1e0,'ySYi')](_0x533cc8,arguments);return _0x33fa69=null,_0x1a5f02;}}:function(){};return _0x1c51ea=![],_0x28d495;}}else this['handleError'](_0x113d4b);}async['getUser'](){const _0x4c65f6={'HXWtP':'GET'};await Helper['delay'](0x3e8,this['acc'],'Getting\x20User\x20Information...',this);const _0x186274=await this['fetch']('/auth/v1/user',_0x4c65f6['HXWtP'],this['token']);_0x186274['status']==0xc8?this['user']=_0x186274:this['handleError'](_0x186274);}async['connectWebSocket'](){const _0x2a5ab6=a2_0x4b0b,_0x48e444={'JUOBO':'fnMsZ','mmBuR':'WebSocket\x20connection\x20closed\x20cleanly.'};let _0x3a2493;try{if(this['proxy']){if(this['proxy']['startsWith']('http'))_0x3a2493=new HttpsProxyAgent(this['proxy']);if(this['proxy']['startsWith']('socks'))_0x3a2493=new SocksProxyAgent(this[_0x2a5ab6(0x1be,')Sq[')]);}this['socketURL']='wss://secure.ws.teneo.pro/websocket?userId='+this['user']['id']+'&version=v0.2',this['socket']=new a2_0x4244d3(this['socketURL'],{'agent':_0x3a2493}),this['socket'][_0x2a5ab6(0x1d1,'x[9h')]=async()=>{const _0x19633c=_0x2a5ab6;if(_0x48e444['JUOBO']===_0x48e444['JUOBO'])try{await Helper[_0x19633c(0x1da,'v4&O')](0x1f4,this['acc'],'WebSocket\x20connection\x20opened.',this),this['wssReconnectAttempts']=0x0;}catch(_0x489d36){a2_0x43b930['error']('Error\x20during\x20WebSocket\x20onopen:\x20'+_0x489d36);throw _0x489d36;}else{const _0xda9779=_0x4e384b['apply'](_0x475bf7,arguments);return _0x53d8ef=null,_0xda9779;}},this['socket']['onmessage']=async _0x1cdbf0=>{try{const _0x507a50=JSON['parse'](_0x1cdbf0['data']);a2_0x43b930['info'](_0x1cdbf0['data']),await Helper['delay'](0x7d0,this['acc'],'Received\x20message:\x20'+_0x507a50['message'],this),_0x507a50['pointsToday']&&(this['point']={'pointsToday':_0x507a50['pointsToday'],'pointsTotal':_0x507a50['pointsTotal']},await Helper['delay'](0x3e8,this['acc'],'User\x20Point\x20Updated',this)),this['startPing']();}catch(_0x499e4d){a2_0x43b930['error']('Error\x20processing\x20WebSocket\x20message:\x20'+_0x499e4d);throw _0x499e4d;}},this['socket']['onerror']=async _0x12111f=>{try{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20error:\x20'+_0x12111f,this);}catch(_0xaf49b0){a2_0x43b930['error']('Error\x20during\x20WebSocket\x20onerror\x20handling:\x20'+_0xaf49b0);throw _0xaf49b0;}},this['socket']['onclose']=async _0x4363e2=>{const _0x84e758=_0x2a5ab6;try{_0x4363e2['wasClean']?await Helper['delay'](0x1f4,this['acc'],_0x48e444['mmBuR'],this):await Helper[_0x84e758(0x1d0,'09M^')](0x1f4,this['acc'],'WebSocket\x20connection\x20closed\x20unexpectedly.',this),await this['stopPing'](),await this['reconnectWebSocket']();}catch(_0x2da2b8){a2_0x43b930['error']('Error\x20during\x20WebSocket\x20onclose\x20handling:\x20'+_0x2da2b8);throw _0x2da2b8;}};}catch(_0x3e17e5){a2_0x43b930['error']('Error\x20in\x20connectWebSocket:\x20'+_0x3e17e5);throw _0x3e17e5;}}async['reconnectWebSocket'](){const _0x4b1d64=a2_0x4b0b,_0x2293bb={'uogMk':function(_0x506074,_0x13e71e){return _0x506074<_0x13e71e;},'YfQfq':function(_0xbeff74,_0x2c120e){return _0xbeff74*_0x2c120e;},'MPxWH':'Max\x20reconnect\x20attempts\x20reached.\x20Could\x20not\x20reconnect\x20to\x20WebSocket.\x20Retrying\x20after\x2030\x20min'};try{if(_0x2293bb['uogMk'](this['wssReconnectAttempts'],this['maxwssReconnectAttempts'])){this['wssReconnectAttempts']+=0x1;const _0x740ed2=Math['min'](0x1388,_0x2293bb['YfQfq'](0x3e8,this['wssReconnectAttempts']));await Helper[_0x4b1d64(0x1d9,'c8h)')](_0x740ed2,this[_0x4b1d64(0x1d3,'srnb')],_0x4b1d64(0x1d7,'[jK7')+this['wssReconnectAttempts']+')...',this),await this['connectWebSocket']();}else await Helper['delay'](_0x2293bb['YfQfq'](0xea60,0x1e),this[_0x4b1d64(0x1d3,'srnb')],_0x2293bb['MPxWH'],this),await this['connectWebSocket']();}catch(_0x1237db){a2_0x43b930['error']('Error\x20in\x20reconnectWebSocket:\x20'+_0x1237db);throw _0x1237db;}}async['sendPing'](){const _0x3fa648=a2_0x4b0b,_0x4b865f={'atjvD':function(_0x305333,_0x41f82b){return _0x305333+_0x41f82b;},'ogkIX':'PING'};this['pingCount']=_0x4b865f['atjvD'](this['pingCount'],0x1),await Helper[_0x3fa648(0x1df,'!zeH')](0x0,this['acc'],'Sending\x20PING\x20'+this['pingCount'],this),this['socket']['send'](JSON['stringify']({'type':_0x4b865f[_0x3fa648(0x1c0,']c(Z')]})),await Helper['delay'](0x2710,this['acc'],'PING\x20'+this['pingCount']+'\x20Sended',this);}async['startPing'](){const _0xb4ff15=a2_0x4b0b,_0x1562e2={'lXMfr':function(_0x32d019,_0x2b57fb,_0x90922d){return _0x32d019(_0x2b57fb,_0x90922d);}};!this['pingInterval']&&(await Helper['delay'](0x0,this['acc'],'Starting\x20PING\x20interval,\x20Ping\x20will\x20be\x20send\x20every\x2010\x20Seconds',this),this['pingInterval']=_0x1562e2[_0xb4ff15(0x1d2,'ySYi')](setInterval,async()=>{this['socket']&&this['socket']['readyState']===a2_0x4244d3['OPEN']&&await this['sendPing']();},0x2710));}async['stopPing'](){this['pingInterval']&&(clearInterval(this['pingInterval']),this['pingInterval']=null);}async['handleError'](_0x5c4517){throw _0x5c4517;}}